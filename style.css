@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');

* { box-sizing: border-box; margin:0; padding:0; font-family:"Poppins",sans-serif; }
html,body { height:100%; }
body {
  background:#0e0f10;
  color:#fff;
  overflow:hidden;
}

/* Container */
#container {
  display:flex;
  height:100vh;
  width:100%;
  position:relative;
  transition: all .32s ease;
}

/* SIDEBAR */
#sidebar {
  position:fixed;
  top:0;
  left:0;
  width:260px;
  height:100vh;
  background:#141517;
  border-right:2px solid #202224;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-top:12px;
  z-index:40;
  transition: transform .32s cubic-bezier(.2,.9,.2,1);
}

/* When closed move fully left */
#sidebar.closed { transform: translateX(-100%); }

/* Sidebar header (logo + inside hamburger) */
.sidebar-header {
  width:92%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:12px;
}
.logo { width:52px; height:52px; object-fit:contain; border-radius:50%; }

/* inside-hamburger (visible on desktop) */
#toggleSidebar.hamburger {
  width:40px; height:36px; display:flex; align-items:center; justify-content:center;
  background:#141517; border:2px solid #22a699; color:#22a699; border-radius:8px; cursor:pointer;
  transition: all .2s ease;
}
#toggleSidebar.hamburger:hover { background:#22a699; color:#111; }

/* New chat, search, history */
#newChatBtn { width:90%; margin-top:6px; padding:10px; border-radius:8px; background:#22a699; color:#fff; border:0; cursor:pointer; }
#newChatBtn:hover{ background:#1f9186; }
.search-box { width:90%; margin-top:12px; }
#searchInput { width:100%; padding:8px; border-radius:6px; border:0; background:#1d1e20; color:#dcdcdc; }
#chatHistory { width:90%; margin-top:12px; flex-grow:1; overflow:auto; }

/* Divider attached to sidebar right */
#divider {
  position:fixed;
  top:0;
  left:260px;
  width:3px;
  height:100vh;
  background: linear-gradient(to bottom,#22a699,#202224);
  box-shadow:0 0 6px rgba(34,166,153,.14);
  z-index:35;
  transition: left .32s ease, opacity .25s ease, transform .32s ease;
}
#divider.closed { left:0; opacity:0; transform: translateX(-100%); }

/* Chat area (content) */
#chatArea {
  flex:1;
  margin-left:260px;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  position:relative;
  transition: margin-left .32s ease;
  z-index:10;
}
/* when container has sidebar-closed, allow chat area to use full width */
.container--sidebar-closed #chatArea,
#container.sidebar-closed #chatArea {
  margin-left:0;
}

/* Chat window */
#chatWindow { flex:1; padding:22px; overflow:auto; display:flex; flex-direction:column; gap:10px; }

/* messages */
.message { max-width:70%; padding:10px 14px; border-radius:12px; line-height:1.4; word-wrap:break-word; }
.user { align-self:flex-end; background:#22a699; color:#fff; }
.bot  { align-self:flex-start; background:#1e1f22; color:#e3e3e3; }

/* Chat input box (keeps centered visually) */
#chatBox {
  position:fixed;
  left:50%;
  transform:translateX(-50%);
  bottom:18px;
  width:min(900px,70%);
  max-width:95%;
  background:#141517;
  border:1px solid #202224;
  border-radius:999px;
  display:flex;
  gap:10px;
  align-items:center;
  padding:10px 14px;
  z-index:20;
  transition: width .25s ease, left .25s ease;
}
#userInput { flex:1; background:transparent;border:0; outline:none; color:#fff; font-size:15px; }
#sendBtn,#micBtn { background:#22a699;border:0;color:#fff;padding:8px 12px;border-radius:8px; cursor:pointer; }
#sendBtn:hover,#micBtn:hover { background:#1f9186; }

/* Floating hamburger (mobile) - initially hidden by default, shown via media queries or JS */
#floatingToggle.hamburger {
  position:fixed;
  top:12px;
  left:12px;
  z-index:60;
  width:40px; height:36px;
  display:flex; align-items:center; justify-content:center;
  background:#141517; border:2px solid #22a699; color:#22a699; border-radius:8px; cursor:pointer;
  transition: all .2s ease;
}

/* bg canvas */
#bgCanvas {
  position:fixed;
  top:0;
  left:260px;
  width:calc(100vw - 260px);
  height:100vh;
  pointer-events:none;
  z-index:1;
  transition: all .45s ease;
}
#bgCanvas.expanded { left:0; width:100vw; }
#bgCanvas.shrunk   { left:260px; width:calc(100vw - 260px); }

/* Hidden helpers */
.hidden { display:none !important; }

/* ======================= Responsive Rules ======================= */

/* Tablet */
@media (max-width:1024px) {
  #sidebar { width:220px; }
  #divider { left:220px; }
  #chatArea { margin-left:220px; }
  #bgCanvas.shrunk { left:220px; width:calc(100vw - 220px); }
}

/* Mobile: show floating toggle, hide inside-toggle, start closed */
@media (max-width:768px) {
  /* hide inside hamburger (in sidebar header) on small screens (it's inaccessible when sidebar closed) */
  #toggleSidebar { display:none; }

  /* show floating hamburger button (user-visible) */
  #floatingToggle { display:flex; }

  /* default to closed for sidebar on mobile (JS will also toggle) */
  #sidebar { transform: translateX(-100%); }
  #sidebar.closed { transform: translateX(-100%); }

  /* hide divider on very small screens for simpler layout (but we'll still animate) */
  #divider { display:none; }

  /* make chatbox wider and closer to bottom */
  #chatBox { width:94%; bottom:12px; border-radius:12px; }
  .logo { width:48px; height:48px; }
}

/* Extra small */
@media (max-width:420px) {
  #floatingToggle { top:10px; left:8px; width:36px; height:34px; }
  .hamburger { width:36px; height:34px; font-size:16px; }
  #chatBox { width:96%; bottom:10px; }
}
